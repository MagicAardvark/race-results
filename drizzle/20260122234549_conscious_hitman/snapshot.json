{
  "version": "8",
  "dialect": "postgres",
  "id": "7ab29152-3d24-4ab0-be13-e4fc74278709",
  "prevIds": [
    "8d3cd839-282c-4d30-95b3-b2bd22f8a04d"
  ],
  "ddl": [
    {
      "isRlsEnabled": false,
      "name": "feature_flags",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "org_api_keys",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "orgs",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "roles",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "user_global_roles",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "user_org_roles",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "users",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "classes_base",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "classes_group_classes",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "classes_groups",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "isRlsEnabled": false,
      "name": "classes_index_values",
      "entityType": "tables",
      "schema": "public"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "feature_key",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "false",
      "generated": null,
      "identity": null,
      "name": "enabled",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "deleted_at",
      "entityType": "columns",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "api_key",
      "entityType": "columns",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "true",
      "generated": null,
      "identity": null,
      "name": "api_key_enabled",
      "entityType": "columns",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "effective_at",
      "entityType": "columns",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "name",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "slug",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "motorsportreg_org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "description",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "false",
      "generated": null,
      "identity": null,
      "name": "is_public",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "deleted_at",
      "entityType": "columns",
      "schema": "public",
      "table": "orgs"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "roles"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "role_key",
      "entityType": "columns",
      "schema": "public",
      "table": "roles"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "name",
      "entityType": "columns",
      "schema": "public",
      "table": "roles"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "effective_at",
      "entityType": "columns",
      "schema": "public",
      "table": "roles"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "true",
      "generated": null,
      "identity": null,
      "name": "is_enabled",
      "entityType": "columns",
      "schema": "public",
      "table": "roles"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "false",
      "generated": null,
      "identity": null,
      "name": "is_global",
      "entityType": "columns",
      "schema": "public",
      "table": "roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "user_id",
      "entityType": "columns",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "role_id",
      "entityType": "columns",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "effective_at",
      "entityType": "columns",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "false",
      "generated": null,
      "identity": null,
      "name": "is_negated",
      "entityType": "columns",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "user_id",
      "entityType": "columns",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "role_id",
      "entityType": "columns",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "effective_at",
      "entityType": "columns",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "false",
      "generated": null,
      "identity": null,
      "name": "is_negated",
      "entityType": "columns",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "users"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "auth_provider_id",
      "entityType": "columns",
      "schema": "public",
      "table": "users"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "users"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "users"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "deleted_at",
      "entityType": "columns",
      "schema": "public",
      "table": "users"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "display_name",
      "entityType": "columns",
      "schema": "public",
      "table": "users"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "short_name",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "long_name",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "true",
      "generated": null,
      "identity": null,
      "name": "is_enabled",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "class_group_id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_group_classes"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "class_id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_group_classes"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "short_name",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "text",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "long_name",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "boolean",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "true",
      "generated": null,
      "identity": null,
      "name": "is_enabled",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "created_at",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "updated_at",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "gen_random_uuid()",
      "generated": null,
      "identity": null,
      "name": "id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "class_id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "effective_from",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "type": "timestamp with time zone",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": "now()",
      "generated": null,
      "identity": null,
      "name": "effective_to",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "type": "numeric(5,4)",
      "typeSchema": null,
      "notNull": true,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "index_value",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "type": "uuid",
      "typeSchema": null,
      "notNull": false,
      "dimensions": 0,
      "default": null,
      "generated": null,
      "identity": null,
      "name": "org_id",
      "entityType": "columns",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "feature_key",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "org_feature_key_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "org_id_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "feature_key",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "feature_key_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "api_key",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "org_api_key_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "api_key_enabled",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "api_key_enabled_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "slug",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "slug_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "orgs"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "slug",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "is_public",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "slug_with_visibility_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "orgs"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "user_global_roles_user_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "role_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "user_global_roles_role_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "user_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "user_org_roles_user_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "role_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "user_org_roles_role_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "user_org_roles_org_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "auth_provider_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": true,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "auth_provider_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "users"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "short_name",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "is_enabled",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "base_class_short_name_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "class_group_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "class_group_class_group_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "classes_group_classes"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "short_name",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "is_enabled",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "car_class_group_short_name_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "nameExplicit": true,
      "columns": [
        {
          "value": "class_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "effective_from",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "effective_to",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        },
        {
          "value": "org_id",
          "isExpression": false,
          "asc": true,
          "nullsFirst": false,
          "opclass": null
        }
      ],
      "isUnique": false,
      "where": null,
      "with": "",
      "method": "btree",
      "concurrently": false,
      "name": "class_index_value_class_effective_idx",
      "entityType": "indexes",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "nameExplicit": false,
      "columns": [
        "org_id"
      ],
      "schemaTo": "public",
      "tableTo": "orgs",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "feature_flags_org_id_orgs_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "feature_flags"
    },
    {
      "nameExplicit": false,
      "columns": [
        "org_id"
      ],
      "schemaTo": "public",
      "tableTo": "orgs",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "org_api_keys_org_id_orgs_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "org_api_keys"
    },
    {
      "nameExplicit": false,
      "columns": [
        "user_id"
      ],
      "schemaTo": "public",
      "tableTo": "users",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "user_global_roles_user_id_users_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "nameExplicit": false,
      "columns": [
        "user_id"
      ],
      "schemaTo": "public",
      "tableTo": "users",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "user_org_roles_user_id_users_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "nameExplicit": false,
      "columns": [
        "org_id"
      ],
      "schemaTo": "public",
      "tableTo": "orgs",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "classes_base_org_id_orgs_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "nameExplicit": false,
      "columns": [
        "class_group_id"
      ],
      "schemaTo": "public",
      "tableTo": "classes_groups",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "classes_group_classes_class_group_id_classes_groups_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "classes_group_classes"
    },
    {
      "nameExplicit": false,
      "columns": [
        "class_id"
      ],
      "schemaTo": "public",
      "tableTo": "classes_base",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "classes_group_classes_class_id_classes_base_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "classes_group_classes"
    },
    {
      "nameExplicit": false,
      "columns": [
        "org_id"
      ],
      "schemaTo": "public",
      "tableTo": "orgs",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "classes_groups_org_id_orgs_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "classes_groups"
    },
    {
      "nameExplicit": false,
      "columns": [
        "class_id"
      ],
      "schemaTo": "public",
      "tableTo": "classes_base",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "classes_index_values_class_id_classes_base_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "nameExplicit": false,
      "columns": [
        "org_id"
      ],
      "schemaTo": "public",
      "tableTo": "orgs",
      "columnsTo": [
        "id"
      ],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "name": "classes_index_values_org_id_orgs_id_fkey",
      "entityType": "fks",
      "schema": "public",
      "table": "classes_index_values"
    },
    {
      "columns": [
        "user_id",
        "role_id",
        "effective_at"
      ],
      "nameExplicit": false,
      "name": "user_global_roles_pkey",
      "entityType": "pks",
      "schema": "public",
      "table": "user_global_roles"
    },
    {
      "columns": [
        "user_id",
        "role_id",
        "org_id",
        "effective_at"
      ],
      "nameExplicit": false,
      "name": "user_org_roles_pkey",
      "entityType": "pks",
      "schema": "public",
      "table": "user_org_roles"
    },
    {
      "columns": [
        "class_group_id",
        "class_id"
      ],
      "nameExplicit": false,
      "name": "classes_group_classes_pkey",
      "entityType": "pks",
      "schema": "public",
      "table": "classes_group_classes"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "feature_flags_pkey",
      "schema": "public",
      "table": "feature_flags",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "org_api_keys_pkey",
      "schema": "public",
      "table": "org_api_keys",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "orgs_pkey",
      "schema": "public",
      "table": "orgs",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "roles_pkey",
      "schema": "public",
      "table": "roles",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "users_pkey",
      "schema": "public",
      "table": "users",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "classes_base_pkey",
      "schema": "public",
      "table": "classes_base",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "classes_groups_pkey",
      "schema": "public",
      "table": "classes_groups",
      "entityType": "pks"
    },
    {
      "columns": [
        "id"
      ],
      "nameExplicit": false,
      "name": "classes_index_values_pkey",
      "schema": "public",
      "table": "classes_index_values",
      "entityType": "pks"
    },
    {
      "nameExplicit": true,
      "columns": [
        "role_key",
        "effective_at"
      ],
      "nullsNotDistinct": false,
      "name": "unique_role",
      "entityType": "uniques",
      "schema": "public",
      "table": "roles"
    },
    {
      "nameExplicit": true,
      "columns": [
        "short_name",
        "org_id"
      ],
      "nullsNotDistinct": false,
      "name": "base_class_name_org_uq",
      "entityType": "uniques",
      "schema": "public",
      "table": "classes_base"
    },
    {
      "nameExplicit": false,
      "columns": [
        "name"
      ],
      "nullsNotDistinct": false,
      "name": "orgs_name_key",
      "schema": "public",
      "table": "orgs",
      "entityType": "uniques"
    },
    {
      "nameExplicit": false,
      "columns": [
        "slug"
      ],
      "nullsNotDistinct": false,
      "name": "orgs_slug_key",
      "schema": "public",
      "table": "orgs",
      "entityType": "uniques"
    },
    {
      "nameExplicit": false,
      "columns": [
        "motorsportreg_org_id"
      ],
      "nullsNotDistinct": false,
      "name": "orgs_motorsportreg_org_id_key",
      "schema": "public",
      "table": "orgs",
      "entityType": "uniques"
    },
    {
      "nameExplicit": false,
      "columns": [
        "name"
      ],
      "nullsNotDistinct": false,
      "name": "roles_name_key",
      "schema": "public",
      "table": "roles",
      "entityType": "uniques"
    },
    {
      "nameExplicit": false,
      "columns": [
        "auth_provider_id"
      ],
      "nullsNotDistinct": false,
      "name": "users_auth_provider_id_key",
      "schema": "public",
      "table": "users",
      "entityType": "uniques"
    },
    {
      "nameExplicit": false,
      "columns": [
        "short_name"
      ],
      "nullsNotDistinct": false,
      "name": "classes_groups_short_name_key",
      "schema": "public",
      "table": "classes_groups",
      "entityType": "uniques"
    },
    {
      "nameExplicit": false,
      "columns": [
        "long_name"
      ],
      "nullsNotDistinct": false,
      "name": "classes_groups_long_name_key",
      "schema": "public",
      "table": "classes_groups",
      "entityType": "uniques"
    },
    {
      "definition": "\nSELECT\n  class_id,\n  short_name,\n  long_name,\n  index_value,\n  org_id,\n  effective_from,\n  effective_to,\n  null as class_group_id,\n  null as group_short_name,\n  null as group_long_name\nFROM classes_effective_index_values_vw\nUNION\nSELECT\n  class_id,\n  short_name,\n  long_name,\n  index_value,\n  org_id,\n  effective_from,\n  effective_to,\n  class_group_id,\n  group_short_name,\n  group_long_name\nFROM classes_group_effective_index_values_vw\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "classes_with_effective_index_values_vw",
      "entityType": "views",
      "schema": "public"
    },
    {
      "definition": "\nSELECT\n    base.id as class_id,\n    base.short_name,\n    base.long_name,\n    index_values.index_value,\n    base.org_id,\n    index_values.effective_from,\n    index_values.effective_to\nFROM classes_base base\nINNER JOIN classes_index_values index_values\n    ON base.id = index_values.class_id\n    AND (\n        (base.org_id IS NULL AND index_values.org_id IS NULL)\n        OR base.org_id = index_values.org_id\n    )\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "classes_effective_index_values_vw",
      "entityType": "views",
      "schema": "public"
    },
    {
      "definition": "\nSELECT\n    base.class_id,\n    CONCAT(cgc.group_short_name, base.short_name) as short_name,\n    CONCAT(cgc.group_long_name, ' ', base.long_name) as long_name,\n    base.index_value,\n    cgc.org_id,\n    base.effective_from,\n    base.effective_to,\n    cgc.class_group_id,\n    cgc.group_short_name,\n    cgc.group_long_name\nFROM classes_effective_index_values_vw base\nINNER JOIN classes_flattened_group_classes_vw cgc\n  ON base.class_id = cgc.class_id\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "classes_group_effective_index_values_vw",
      "entityType": "views",
      "schema": "public"
    },
    {
      "definition": "\nSELECT\n    cg.id as class_group_id,\n    cgc.class_id,\n    cg.org_id,\n    cg.short_name as group_short_name,\n    cg.long_name as group_long_name\nFROM classes_groups cg\nINNER JOIN classes_group_classes cgc\n    ON cg.id = cgc.class_group_id\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "classes_flattened_group_classes_vw",
      "entityType": "views",
      "schema": "public"
    },
    {
      "definition": "\n  WITH global_roles AS (\n    SELECT\n      id,\n      role_key,\n      name,\n      is_enabled,\n      is_global,\n      ROW_NUMBER() OVER (PARTITION BY id ORDER BY effective_at DESC) as row_num\n    FROM roles\n    WHERE\n      effective_at <= CURRENT_TIMESTAMP\n  )\n\n  SELECT\n    id,\n    role_key,\n    name,\n    is_global\n  FROM global_roles\n  WHERE\n    row_num = 1\n  AND is_enabled = true\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "roles_current_vw",
      "entityType": "views",
      "schema": "public"
    },
    {
      "definition": "\nWITH effective_global_roles AS (\n  SELECT\n    user_global_roles.user_id,\n    roles_current_vw.id as role_id,\n    roles_current_vw.role_key,\n    roles_current_vw.name as role_name,\n    user_global_roles.is_negated,\n    ROW_NUMBER() OVER (\n        PARTITION BY \n            user_global_roles.user_id, \n            roles_current_vw.id\n        ORDER BY user_global_roles.effective_at DESC\n    ) as row_num\n  FROM\n    user_global_roles\n  JOIN roles_current_vw ON user_global_roles.role_id = roles_current_vw.id\n  WHERE\n    user_global_roles.effective_at < CURRENT_TIMESTAMP\n)\n\nSELECT\n  user_id,\n  role_id,\n  role_key,\n  role_name\nFROM effective_global_roles\nWHERE\n  row_num = 1\nAND is_negated = false\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "user_global_roles_vw",
      "entityType": "views",
      "schema": "public"
    },
    {
      "definition": "\nWITH effective_org_roles AS (\n  SELECT\n    user_org_roles.user_id,\n    roles_current_vw.id as role_id,\n    roles_current_vw.role_key,\n    roles_current_vw.name as role_name,\n    user_org_roles.org_id,\n    user_org_roles.is_negated,\n    ROW_NUMBER() OVER (\n        PARTITION BY \n            user_org_roles.user_id, \n            roles_current_vw.id, \n            user_org_roles.org_id \n        ORDER BY user_org_roles.effective_at DESC\n    ) as row_num\n  FROM\n    user_org_roles\n    JOIN roles_current_vw ON user_org_roles.role_id = roles_current_vw.id\n  WHERE\n    user_org_roles.effective_at < CURRENT_TIMESTAMP\n)\n\nSELECT\n  user_id,\n  role_id,\n  role_key,\n  role_name,\n  org_id\nFROM effective_org_roles\nWHERE\n  row_num = 1\nAND is_negated = false\n",
      "with": null,
      "withNoData": null,
      "using": null,
      "tablespace": null,
      "materialized": false,
      "name": "user_org_roles_vw",
      "entityType": "views",
      "schema": "public"
    }
  ],
  "renames": []
}